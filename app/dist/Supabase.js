sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e){"use strict";return e.extend("dalrae.cap.supabase.fioridemo.Supabase",{comps:{},onInit:function(){const{client:e}=window;this.bus=sap.ui.getCore().getEventBus();e.auth.onAuthStateChange(t=>{if(t==="SIGNED_IN"){e.from("dalrae_cap_supabase_chat_channel").on("INSERT",e=>this.bus.publish("chat","insert:channel",e)).subscribe();e.from("dalrae_cap_supabase_chat_message").on("INSERT",e=>this.bus.publish("chat","insert:message",e)).subscribe()}this._switch()})},login:function(e){this.getView().byId("msg").setVisible(true);e.getSource().setVisible(false);window.client.auth.signIn({email:this.getView().byId("email").getValue()},{redirectTo:window.location.href})},logout:function(){window.client.auth.signOut()},github:function(){window.open("https://github.com/DalRaeSolutions/dalrae.cap.demo.supabase","_blank")}})});